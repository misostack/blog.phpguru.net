/*! For license information please see home.js.LICENSE.txt */
(()=>{var i={446:()=>{var i;(i=jQuery).fn.theiaStickySidebar=function(t){function e(t,e){return!0===t.initialized||!(i("body").width()<t.minWidth)&&(function(t,e){t.initialized=!0,0===i("#theia-sticky-sidebar-stylesheet-"+t.namespace).length&&i("head").append(i('<style id="theia-sticky-sidebar-stylesheet-'+t.namespace+'">.theiaStickySidebar:after {content: ""; display: table; clear: both;}</style>')),e.each((function(){var e={};if(e.sidebar=i(this),e.options=t||{},e.container=i(e.options.containerSelector),0==e.container.length&&(e.container=e.sidebar.parent()),e.sidebar.parents().css("-webkit-transform","none"),e.sidebar.css({position:e.options.defaultPosition,overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),e.stickySidebar=e.sidebar.find(".theiaStickySidebar"),0==e.stickySidebar.length){var a=/(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i;e.sidebar.find("script").filter((function(i,t){return 0===t.type.length||t.type.match(a)})).remove(),e.stickySidebar=i("<div>").addClass("theiaStickySidebar").append(e.sidebar.children()),e.sidebar.append(e.stickySidebar)}e.marginBottom=parseInt(e.sidebar.css("margin-bottom")),e.paddingTop=parseInt(e.sidebar.css("padding-top")),e.paddingBottom=parseInt(e.sidebar.css("padding-bottom"));var n=e.stickySidebar.offset().top,r=e.stickySidebar.outerHeight();function s(){e.fixedScrollTop=0,e.sidebar.css({"min-height":"1px"}),e.stickySidebar.css({position:"static",width:"",transform:"none"})}e.stickySidebar.css("padding-top",1),e.stickySidebar.css("padding-bottom",1),n-=e.stickySidebar.offset().top,r=e.stickySidebar.outerHeight()-r-n,0==n?(e.stickySidebar.css("padding-top",0),e.stickySidebarPaddingTop=0):e.stickySidebarPaddingTop=1,0==r?(e.stickySidebar.css("padding-bottom",0),e.stickySidebarPaddingBottom=0):e.stickySidebarPaddingBottom=1,e.previousScrollTop=null,e.fixedScrollTop=0,s(),e.onScroll=function(e){if(e.stickySidebar.is(":visible"))if(i("body").width()<e.options.minWidth)s();else{if(e.options.disableOnResponsiveLayouts&&e.sidebar.outerWidth("none"==e.sidebar.css("float"))+50>e.container.width())return void s();var a=i(document).scrollTop(),n="static";if(a>=e.sidebar.offset().top+(e.paddingTop-e.options.additionalMarginTop)){var r,d=e.paddingTop+t.additionalMarginTop,c=e.paddingBottom+e.marginBottom+t.additionalMarginBottom,p=e.sidebar.offset().top,b=e.sidebar.offset().top+(k=e.container,v=k.height(),k.children().each((function(){v=Math.max(v,i(this).height())})),v),l=0+t.additionalMarginTop;r=e.stickySidebar.outerHeight()+d+c<i(window).height()?l+e.stickySidebar.outerHeight():i(window).height()-e.marginBottom-e.paddingBottom-t.additionalMarginBottom;var f=p-a+e.paddingTop,h=b-a-e.paddingBottom-e.marginBottom,u=e.stickySidebar.offset().top-a,g=e.previousScrollTop-a;"fixed"==e.stickySidebar.css("position")&&"modern"==e.options.sidebarBehavior&&(u+=g),"stick-to-top"==e.options.sidebarBehavior&&(u=t.additionalMarginTop),"stick-to-bottom"==e.options.sidebarBehavior&&(u=r-e.stickySidebar.outerHeight()),u=g>0?Math.min(u,l):Math.max(u,r-e.stickySidebar.outerHeight()),u=Math.max(u,f),u=Math.min(u,h-e.stickySidebar.outerHeight());var S=e.container.height()==e.stickySidebar.outerHeight();n=!S&&u==l||!S&&u==r-e.stickySidebar.outerHeight()?"fixed":a+u-e.sidebar.offset().top-e.paddingTop<=t.additionalMarginTop?"static":"absolute"}if("fixed"==n){var y=i(document).scrollLeft();e.stickySidebar.css({position:"fixed",width:o(e.stickySidebar)+"px",transform:"translateY("+u+"px)",left:e.sidebar.offset().left+parseInt(e.sidebar.css("padding-left"))-y+"px",top:"0px"})}else if("absolute"==n){var m={};"absolute"!=e.stickySidebar.css("position")&&(m.position="absolute",m.transform="translateY("+(a+u-e.sidebar.offset().top-e.stickySidebarPaddingTop-e.stickySidebarPaddingBottom)+"px)",m.top="0px"),m.width=o(e.stickySidebar)+"px",m.left="",e.stickySidebar.css(m)}else"static"==n&&s();"static"!=n&&1==e.options.updateSidebarHeight&&e.sidebar.css({"min-height":e.stickySidebar.outerHeight()+e.stickySidebar.offset().top-e.sidebar.offset().top+e.paddingBottom}),e.previousScrollTop=a}var k,v},e.onScroll(e),i(document).on("scroll."+e.options.namespace,function(i){return function(){i.onScroll(i)}}(e)),i(window).on("resize."+e.options.namespace,function(i){return function(){i.stickySidebar.css({position:"static"}),i.onScroll(i)}}(e)),"undefined"!=typeof ResizeSensor&&new ResizeSensor(e.stickySidebar[0],function(i){return function(){i.onScroll(i)}}(e))}))}(t,e),!0)}function o(i){var t;try{t=i[0].getBoundingClientRect().width}catch(i){}return void 0===t&&(t=i.width()),t}return(t=i.extend({containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern",defaultPosition:"relative",namespace:"TSS"},t)).additionalMarginTop=parseInt(t.additionalMarginTop)||0,t.additionalMarginBottom=parseInt(t.additionalMarginBottom)||0,function(t,o){e(t,o)||(console.log("TSS: Body width smaller than options.minWidth. Init is delayed."),i(document).on("scroll."+t.namespace,function(t,o){return function(a){e(t,o)&&i(this).unbind(a)}}(t,o)),i(window).on("resize."+t.namespace,function(t,o){return function(a){e(t,o)&&i(this).unbind(a)}}(t,o)))}(t,this),this}}},t={};function e(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return i[o](n,n.exports,e),n.exports}e.n=i=>{var t=i&&i.__esModule?()=>i.default:()=>i;return e.d(t,{a:t}),t},e.d=(i,t)=>{for(var o in t)e.o(t,o)&&!e.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:t[o]})},e.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),(()=>{"use strict";var i;e(446),(i=jQuery)((()=>{i(".content, .sidebar").theiaStickySidebar({additionalMarginTop:120,minWidth:1024})}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW9COUUsRUFBRWtGLEVBQVNTLElBQzVFQyxPQUFPQyxlQUFlWCxFQUFTUyxFQUFLLENBQUVHLFlBQVksRUFBTUMsSUFBS0wsRUFBV0MsTUNKM0ViLEVBQW9COUUsRUFBSSxDQUFDZ0csRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsMEJDR3ZFL0csVUFBQUEsRUFRUkMsU0FQRyxLQUNFRCxFQUFFLHNCQUFzQkcsbUJBQW1CLENBRXZDb0Qsb0JBQXFCLElBQ3JCOUMsU0FBVSIsInNvdXJjZXMiOlsid2VicGFjazovL3djczAwMS8uL3NyYy9qcy90aGVpYS1zdGlja3ktc2lkZWJhci5qcyIsIndlYnBhY2s6Ly93Y3MwMDEvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2NzMDAxL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3djczAwMS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2NzMDAxL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vd2NzMDAxLy4vc3JjL2pzL2hvbWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXHJcbiAqIFRoZWlhIFN0aWNreSBTaWRlYmFyIHYxLjcuMFxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vV2VDb2RlUGl4ZWxzL3RoZWlhLXN0aWNreS1zaWRlYmFyXHJcbiAqXHJcbiAqIEdsdWVzIHlvdXIgd2Vic2l0ZSdzIHNpZGViYXJzLCBtYWtpbmcgdGhlbSBwZXJtYW5lbnRseSB2aXNpYmxlIHdoaWxlIHNjcm9sbGluZy5cclxuICpcclxuICogQ29weXJpZ2h0IDIwMTMtMjAxNiBXZUNvZGVQaXhlbHMgYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcclxuICovXHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuICAgICQuZm4udGhlaWFTdGlja3lTaWRlYmFyID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgICdjb250YWluZXJTZWxlY3Rvcic6ICcnLFxyXG4gICAgICAgICAgICAnYWRkaXRpb25hbE1hcmdpblRvcCc6IDAsXHJcbiAgICAgICAgICAgICdhZGRpdGlvbmFsTWFyZ2luQm90dG9tJzogMCxcclxuICAgICAgICAgICAgJ3VwZGF0ZVNpZGViYXJIZWlnaHQnOiB0cnVlLFxyXG4gICAgICAgICAgICAnbWluV2lkdGgnOiAwLFxyXG4gICAgICAgICAgICAnZGlzYWJsZU9uUmVzcG9uc2l2ZUxheW91dHMnOiB0cnVlLFxyXG4gICAgICAgICAgICAnc2lkZWJhckJlaGF2aW9yJzogJ21vZGVybicsXHJcbiAgICAgICAgICAgICdkZWZhdWx0UG9zaXRpb24nOiAncmVsYXRpdmUnLFxyXG4gICAgICAgICAgICAnbmFtZXNwYWNlJzogJ1RTUydcclxuICAgICAgICB9O1xyXG4gICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIG9wdGlvbnNcclxuICAgICAgICBvcHRpb25zLmFkZGl0aW9uYWxNYXJnaW5Ub3AgPSBwYXJzZUludChvcHRpb25zLmFkZGl0aW9uYWxNYXJnaW5Ub3ApIHx8IDA7XHJcbiAgICAgICAgb3B0aW9ucy5hZGRpdGlvbmFsTWFyZ2luQm90dG9tID0gcGFyc2VJbnQob3B0aW9ucy5hZGRpdGlvbmFsTWFyZ2luQm90dG9tKSB8fCAwO1xyXG5cclxuICAgICAgICB0cnlJbml0T3JIb29rSW50b0V2ZW50cyhvcHRpb25zLCB0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gVHJ5IGRvaW5nIGluaXQsIG90aGVyd2lzZSBob29rIGludG8gd2luZG93LnJlc2l6ZSBhbmQgZG9jdW1lbnQuc2Nyb2xsIGFuZCB0cnkgYWdhaW4gdGhlbi5cclxuICAgICAgICBmdW5jdGlvbiB0cnlJbml0T3JIb29rSW50b0V2ZW50cyhvcHRpb25zLCAkdGhhdCkge1xyXG4gICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHRyeUluaXQob3B0aW9ucywgJHRoYXQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVFNTOiBCb2R5IHdpZHRoIHNtYWxsZXIgdGhhbiBvcHRpb25zLm1pbldpZHRoLiBJbml0IGlzIGRlbGF5ZWQuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ3Njcm9sbC4nICsgb3B0aW9ucy5uYW1lc3BhY2UsIGZ1bmN0aW9uIChvcHRpb25zLCAkdGhhdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gdHJ5SW5pdChvcHRpb25zLCAkdGhhdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS51bmJpbmQoZXZ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KG9wdGlvbnMsICR0aGF0KSk7XHJcbiAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZS4nICsgb3B0aW9ucy5uYW1lc3BhY2UsIGZ1bmN0aW9uIChvcHRpb25zLCAkdGhhdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gdHJ5SW5pdChvcHRpb25zLCAkdGhhdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS51bmJpbmQoZXZ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KG9wdGlvbnMsICR0aGF0KSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVHJ5IGRvaW5nIGluaXQgaWYgcHJvcGVyIGNvbmRpdGlvbnMgYXJlIG1ldC5cclxuICAgICAgICBmdW5jdGlvbiB0cnlJbml0KG9wdGlvbnMsICR0aGF0KSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluaXRpYWxpemVkID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCQoJ2JvZHknKS53aWR0aCgpIDwgb3B0aW9ucy5taW5XaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbml0KG9wdGlvbnMsICR0aGF0KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSW5pdCB0aGUgc3RpY2t5IHNpZGViYXIocykuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdChvcHRpb25zLCAkdGhhdCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBDU1NcclxuICAgICAgICAgICAgdmFyIGV4aXN0aW5nU3R5bGVzaGVldCA9ICQoJyN0aGVpYS1zdGlja3ktc2lkZWJhci1zdHlsZXNoZWV0LScgKyBvcHRpb25zLm5hbWVzcGFjZSk7XHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1N0eWxlc2hlZXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdoZWFkJykuYXBwZW5kKCQoJzxzdHlsZSBpZD1cInRoZWlhLXN0aWNreS1zaWRlYmFyLXN0eWxlc2hlZXQtJyArIG9wdGlvbnMubmFtZXNwYWNlICsgJ1wiPi50aGVpYVN0aWNreVNpZGViYXI6YWZ0ZXIge2NvbnRlbnQ6IFwiXCI7IGRpc3BsYXk6IHRhYmxlOyBjbGVhcjogYm90aDt9PC9zdHlsZT4nKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICR0aGF0LmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG8gPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICBvLnNpZGViYXIgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNhdmUgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgby5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICBvLmNvbnRhaW5lciA9ICQoby5vcHRpb25zLmNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgIGlmIChvLmNvbnRhaW5lci5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG8uY29udGFpbmVyID0gby5zaWRlYmFyLnBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBzdGlja3kgc2lkZWJhclxyXG4gICAgICAgICAgICAgICAgby5zaWRlYmFyLnBhcmVudHMoKS5jc3MoJy13ZWJraXQtdHJhbnNmb3JtJywgJ25vbmUnKTsgLy8gRml4IGZvciBXZWJLaXQgYnVnIC0gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTIwNTc0XHJcbiAgICAgICAgICAgICAgICBvLnNpZGViYXIuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAncG9zaXRpb24nOiBvLm9wdGlvbnMuZGVmYXVsdFBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdyc6ICd2aXNpYmxlJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgXCJib3gtc2l6aW5nXCIgbXVzdCBiZSBzZXQgdG8gXCJjb250ZW50LWJveFwiIGJlY2F1c2Ugd2Ugc2V0IGEgZml4ZWQgaGVpZ2h0IHRvIHRoaXMgZWxlbWVudCB3aGVuIHRoZSBzdGlja3kgc2lkZWJhciBoYXMgYSBmaXhlZCBwb3NpdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC1ib3gtc2l6aW5nJzogJ2JvcmRlci1ib3gnLFxyXG4gICAgICAgICAgICAgICAgICAgICctbW96LWJveC1zaXppbmcnOiAnYm9yZGVyLWJveCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgc3RpY2t5IHNpZGViYXIgZWxlbWVudC4gSWYgbm9uZSBoYXMgYmVlbiBmb3VuZCwgdGhlbiBjcmVhdGUgb25lLlxyXG4gICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyID0gby5zaWRlYmFyLmZpbmQoJy50aGVpYVN0aWNreVNpZGViYXInKTtcclxuICAgICAgICAgICAgICAgIGlmIChvLnN0aWNreVNpZGViYXIubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgPHNjcmlwdD4gdGFncywgb3RoZXJ3aXNlIHRoZXkgd2lsbCBiZSBydW4gYWdhaW4gd2hlbiBhZGRlZCB0byB0aGUgc3RpY2t5U2lkZWJhci5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgamF2YVNjcmlwdE1JTUVUeXBlcyA9IC8oPzp0ZXh0fGFwcGxpY2F0aW9uKVxcLyg/OngtKT8oPzpqYXZhc2NyaXB0fGVjbWFzY3JpcHQpL2k7XHJcbiAgICAgICAgICAgICAgICAgICAgby5zaWRlYmFyLmZpbmQoJ3NjcmlwdCcpLmZpbHRlcihmdW5jdGlvbiAoaW5kZXgsIHNjcmlwdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NyaXB0LnR5cGUubGVuZ3RoID09PSAwIHx8IHNjcmlwdC50eXBlLm1hdGNoKGphdmFTY3JpcHRNSU1FVHlwZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBvLnN0aWNreVNpZGViYXIgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCd0aGVpYVN0aWNreVNpZGViYXInKS5hcHBlbmQoby5zaWRlYmFyLmNoaWxkcmVuKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG8uc2lkZWJhci5hcHBlbmQoby5zdGlja3lTaWRlYmFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgZXhpc3RpbmcgdG9wIGFuZCBib3R0b20gbWFyZ2lucyBhbmQgcGFkZGluZ3NcclxuICAgICAgICAgICAgICAgIG8ubWFyZ2luQm90dG9tID0gcGFyc2VJbnQoby5zaWRlYmFyLmNzcygnbWFyZ2luLWJvdHRvbScpKTtcclxuICAgICAgICAgICAgICAgIG8ucGFkZGluZ1RvcCA9IHBhcnNlSW50KG8uc2lkZWJhci5jc3MoJ3BhZGRpbmctdG9wJykpO1xyXG4gICAgICAgICAgICAgICAgby5wYWRkaW5nQm90dG9tID0gcGFyc2VJbnQoby5zaWRlYmFyLmNzcygncGFkZGluZy1ib3R0b20nKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGEgdGVtcG9yYXJ5IHBhZGRpbmcgcnVsZSB0byBjaGVjayBmb3IgY29sbGFwc2FibGUgbWFyZ2lucy5cclxuICAgICAgICAgICAgICAgIHZhciBjb2xsYXBzZWRUb3BIZWlnaHQgPSBvLnN0aWNreVNpZGViYXIub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbGxhcHNlZEJvdHRvbUhlaWdodCA9IG8uc3RpY2t5U2lkZWJhci5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyLmNzcygncGFkZGluZy10b3AnLCAxKTtcclxuICAgICAgICAgICAgICAgIG8uc3RpY2t5U2lkZWJhci5jc3MoJ3BhZGRpbmctYm90dG9tJywgMSk7XHJcbiAgICAgICAgICAgICAgICBjb2xsYXBzZWRUb3BIZWlnaHQgLT0gby5zdGlja3lTaWRlYmFyLm9mZnNldCgpLnRvcDtcclxuICAgICAgICAgICAgICAgIGNvbGxhcHNlZEJvdHRvbUhlaWdodCA9IG8uc3RpY2t5U2lkZWJhci5vdXRlckhlaWdodCgpIC0gY29sbGFwc2VkQm90dG9tSGVpZ2h0IC0gY29sbGFwc2VkVG9wSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbGxhcHNlZFRvcEhlaWdodCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyLmNzcygncGFkZGluZy10b3AnLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBvLnN0aWNreVNpZGViYXJQYWRkaW5nVG9wID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG8uc3RpY2t5U2lkZWJhclBhZGRpbmdUb3AgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb2xsYXBzZWRCb3R0b21IZWlnaHQgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG8uc3RpY2t5U2lkZWJhci5jc3MoJ3BhZGRpbmctYm90dG9tJywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyUGFkZGluZ0JvdHRvbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvLnN0aWNreVNpZGViYXJQYWRkaW5nQm90dG9tID0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhpcyB0byBrbm93IHdoZXRoZXIgdGhlIHVzZXIgaXMgc2Nyb2xsaW5nIHVwIG9yIGRvd24uXHJcbiAgICAgICAgICAgICAgICBvLnByZXZpb3VzU2Nyb2xsVG9wID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTY3JvbGwgdG9wICh2YWx1ZSkgd2hlbiB0aGUgc2lkZWJhciBoYXMgZml4ZWQgcG9zaXRpb24uXHJcbiAgICAgICAgICAgICAgICBvLmZpeGVkU2Nyb2xsVG9wID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgc2lkZWJhciB0byBkZWZhdWx0IHZhbHVlcy5cclxuICAgICAgICAgICAgICAgIHJlc2V0U2lkZWJhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIG8ub25TY3JvbGwgPSBmdW5jdGlvbiAobykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0b3AgaWYgdGhlIHNpZGViYXIgaXNuJ3QgdmlzaWJsZS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW8uc3RpY2t5U2lkZWJhci5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0b3AgaWYgdGhlIHdpbmRvdyBpcyB0b28gc21hbGwuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoJ2JvZHknKS53aWR0aCgpIDwgby5vcHRpb25zLm1pbldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0U2lkZWJhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIGlmIHRoZSBzaWRlYmFyIHdpZHRoIGlzIGxhcmdlciB0aGFuIHRoZSBjb250YWluZXIgd2lkdGggKGUuZy4gdGhlIHRoZW1lIGlzIHJlc3BvbnNpdmUgYW5kIHRoZSBzaWRlYmFyIGlzIG5vdyBiZWxvdyB0aGUgY29udGVudClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoby5vcHRpb25zLmRpc2FibGVPblJlc3BvbnNpdmVMYXlvdXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaWRlYmFyV2lkdGggPSBvLnNpZGViYXIub3V0ZXJXaWR0aChvLnNpZGViYXIuY3NzKCdmbG9hdCcpID09ICdub25lJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZWJhcldpZHRoICsgNTAgPiBvLmNvbnRhaW5lci53aWR0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldFNpZGViYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9ICdzdGF0aWMnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBoYXMgc2Nyb2xsZWQgZG93biBlbm91Z2ggZm9yIHRoZSBzaWRlYmFyIHRvIGJlIGNsaXBwZWQgYXQgdGhlIHRvcCwgdGhlbiB3ZSBjYW4gY29uc2lkZXIgY2hhbmdpbmcgaXRzIHBvc2l0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzY3JvbGxUb3AgPj0gby5zaWRlYmFyLm9mZnNldCgpLnRvcCArIChvLnBhZGRpbmdUb3AgLSBvLm9wdGlvbnMuYWRkaXRpb25hbE1hcmdpblRvcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHRvcCBhbmQgYm90dG9tIG9mZnNldHMsIHVzZWQgaW4gdmFyaW91cyBjYWxjdWxhdGlvbnMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRUb3AgPSBvLnBhZGRpbmdUb3AgKyBvcHRpb25zLmFkZGl0aW9uYWxNYXJnaW5Ub3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRCb3R0b20gPSBvLnBhZGRpbmdCb3R0b20gKyBvLm1hcmdpbkJvdHRvbSArIG9wdGlvbnMuYWRkaXRpb25hbE1hcmdpbkJvdHRvbTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbCB0b3AgYW5kIGJvdHRvbSBwb3NpdGlvbnMgYXJlIHJlbGF0aXZlIHRvIHRoZSB3aW5kb3csIG5vdCB0byB0aGUgcGFyZW50IGVsZW1udHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXJUb3AgPSBvLnNpZGViYXIub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyQm90dG9tID0gby5zaWRlYmFyLm9mZnNldCgpLnRvcCArIGdldENsZWFyZWRIZWlnaHQoby5jb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHRvcCBhbmQgYm90dG9tIG9mZnNldHMgcmVsYXRpdmUgdG8gdGhlIHdpbmRvdyBzY3JlZW4gdG9wICh6ZXJvKSBhbmQgYm90dG9tICh3aW5kb3cgaGVpZ2h0KS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdpbmRvd09mZnNldFRvcCA9IDAgKyBvcHRpb25zLmFkZGl0aW9uYWxNYXJnaW5Ub3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3aW5kb3dPZmZzZXRCb3R0b207XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2lkZWJhclNtYWxsZXJUaGFuV2luZG93ID0gKG8uc3RpY2t5U2lkZWJhci5vdXRlckhlaWdodCgpICsgb2Zmc2V0VG9wICsgb2Zmc2V0Qm90dG9tKSA8ICQod2luZG93KS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpZGViYXJTbWFsbGVyVGhhbldpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93T2Zmc2V0Qm90dG9tID0gd2luZG93T2Zmc2V0VG9wICsgby5zdGlja3lTaWRlYmFyLm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dPZmZzZXRCb3R0b20gPSAkKHdpbmRvdykuaGVpZ2h0KCkgLSBvLm1hcmdpbkJvdHRvbSAtIG8ucGFkZGluZ0JvdHRvbSAtIG9wdGlvbnMuYWRkaXRpb25hbE1hcmdpbkJvdHRvbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRpY0xpbWl0VG9wID0gY29udGFpbmVyVG9wIC0gc2Nyb2xsVG9wICsgby5wYWRkaW5nVG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGljTGltaXRCb3R0b20gPSBjb250YWluZXJCb3R0b20gLSBzY3JvbGxUb3AgLSBvLnBhZGRpbmdCb3R0b20gLSBvLm1hcmdpbkJvdHRvbTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSBvLnN0aWNreVNpZGViYXIub2Zmc2V0KCkudG9wIC0gc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wRGlmZiA9IG8ucHJldmlvdXNTY3JvbGxUb3AgLSBzY3JvbGxUb3A7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgc2lkZWJhciBwb3NpdGlvbiBpcyBmaXhlZCwgdGhlbiBpdCB3b24ndCBtb3ZlIHVwIG9yIGRvd24gYnkgaXRzZWxmLiBTbywgd2UgbWFudWFsbHkgYWRqdXN0IHRoZSB0b3AgY29vcmRpbmF0ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uc3RpY2t5U2lkZWJhci5jc3MoJ3Bvc2l0aW9uJykgPT0gJ2ZpeGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8ub3B0aW9ucy5zaWRlYmFyQmVoYXZpb3IgPT0gJ21vZGVybicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AgKz0gc2Nyb2xsVG9wRGlmZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8ub3B0aW9ucy5zaWRlYmFyQmVoYXZpb3IgPT0gJ3N0aWNrLXRvLXRvcCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IG9wdGlvbnMuYWRkaXRpb25hbE1hcmdpblRvcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8ub3B0aW9ucy5zaWRlYmFyQmVoYXZpb3IgPT0gJ3N0aWNrLXRvLWJvdHRvbScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IHdpbmRvd09mZnNldEJvdHRvbSAtIG8uc3RpY2t5U2lkZWJhci5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVG9wRGlmZiA+IDApIHsgLy8gSWYgdGhlIHVzZXIgaXMgc2Nyb2xsaW5nIHVwLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gTWF0aC5taW4odG9wLCB3aW5kb3dPZmZzZXRUb3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBJZiB0aGUgdXNlciBpcyBzY3JvbGxpbmcgZG93bi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IE1hdGgubWF4KHRvcCwgd2luZG93T2Zmc2V0Qm90dG9tIC0gby5zdGlja3lTaWRlYmFyLm91dGVySGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBNYXRoLm1heCh0b3AsIHN0YXRpY0xpbWl0VG9wKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IE1hdGgubWluKHRvcCwgc3RhdGljTGltaXRCb3R0b20gLSBvLnN0aWNreVNpZGViYXIub3V0ZXJIZWlnaHQoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgc2lkZWJhciBpcyB0aGUgc2FtZSBoZWlnaHQgYXMgdGhlIGNvbnRhaW5lciwgd2Ugd29uJ3QgdXNlIGZpeGVkIHBvc2l0aW9uaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2lkZWJhclNhbWVIZWlnaHRBc0NvbnRhaW5lciA9IG8uY29udGFpbmVyLmhlaWdodCgpID09IG8uc3RpY2t5U2lkZWJhci5vdXRlckhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzaWRlYmFyU2FtZUhlaWdodEFzQ29udGFpbmVyICYmIHRvcCA9PSB3aW5kb3dPZmZzZXRUb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghc2lkZWJhclNhbWVIZWlnaHRBc0NvbnRhaW5lciAmJiB0b3AgPT0gd2luZG93T2Zmc2V0Qm90dG9tIC0gby5zdGlja3lTaWRlYmFyLm91dGVySGVpZ2h0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzY3JvbGxUb3AgKyB0b3AgLSBvLnNpZGViYXIub2Zmc2V0KCkudG9wIC0gby5wYWRkaW5nVG9wIDw9IG9wdGlvbnMuYWRkaXRpb25hbE1hcmdpblRvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3R1Y2sgdG8gdGhlIHRvcCBvZiB0aGUgcGFnZS4gTm8gc3BlY2lhbCBiZWhhdmlvci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJ3N0YXRpYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHVjayB0byB0aGUgYm90dG9tIG9mIHRoZSBwYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgICAqIFBlcmZvcm1hbmNlIG5vdGljZTogSXQncyBPSyB0byBzZXQgdGhlc2UgQ1NTIHZhbHVlcyBhdCBlYWNoIHJlc2l6ZS9zY3JvbGwsIGV2ZW4gaWYgdGhleSBkb24ndCBjaGFuZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICogSXQncyB3YXkgc2xvd2VyIHRvIGZpcnN0IGNoZWNrIGlmIHRoZSB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLlxyXG4gICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PSAnZml4ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncG9zaXRpb24nOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogZ2V0V2lkdGhGb3JPYmplY3Qoby5zdGlja3lTaWRlYmFyKSArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoJyArIHRvcCArICdweCknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiAoby5zaWRlYmFyLm9mZnNldCgpLmxlZnQgKyBwYXJzZUludChvLnNpZGViYXIuY3NzKCdwYWRkaW5nLWxlZnQnKSkgLSBzY3JvbGxMZWZ0KSArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndG9wJzogJzBweCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID09ICdhYnNvbHV0ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNzcyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uc3RpY2t5U2lkZWJhci5jc3MoJ3Bvc2l0aW9uJykgIT0gJ2Fic29sdXRlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcy50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgnICsgKHNjcm9sbFRvcCArIHRvcCAtIG8uc2lkZWJhci5vZmZzZXQoKS50b3AgLSBvLnN0aWNreVNpZGViYXJQYWRkaW5nVG9wIC0gby5zdGlja3lTaWRlYmFyUGFkZGluZ0JvdHRvbSkgKyAncHgpJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcy50b3AgPSAnMHB4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzLndpZHRoID0gZ2V0V2lkdGhGb3JPYmplY3Qoby5zdGlja3lTaWRlYmFyKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcy5sZWZ0ID0gJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvLnN0aWNreVNpZGViYXIuY3NzKGNzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID09ICdzdGF0aWMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0U2lkZWJhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uICE9ICdzdGF0aWMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLm9wdGlvbnMudXBkYXRlU2lkZWJhckhlaWdodCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnNpZGViYXIuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6IG8uc3RpY2t5U2lkZWJhci5vdXRlckhlaWdodCgpICsgby5zdGlja3lTaWRlYmFyLm9mZnNldCgpLnRvcCAtIG8uc2lkZWJhci5vZmZzZXQoKS50b3AgKyBvLnBhZGRpbmdCb3R0b21cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBvLnByZXZpb3VzU2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBzaWRlYmFyJ3MgcG9zaXRpb24uXHJcbiAgICAgICAgICAgICAgICBvLm9uU2Nyb2xsKG8pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlY2FsY3VsYXRlIHRoZSBzaWRlYmFyJ3MgcG9zaXRpb24gb24gZXZlcnkgc2Nyb2xsIGFuZCByZXNpemUuXHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbignc2Nyb2xsLicgKyBvLm9wdGlvbnMubmFtZXNwYWNlLCBmdW5jdGlvbiAobykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ub25TY3JvbGwobyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0obykpO1xyXG4gICAgICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUuJyArIG8ub3B0aW9ucy5uYW1lc3BhY2UsIGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyLmNzcyh7J3Bvc2l0aW9uJzogJ3N0YXRpYyd9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5vblNjcm9sbChvKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfShvKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVjYWxjdWxhdGUgdGhlIHNpZGViYXIncyBwb3NpdGlvbiBldmVyeSB0aW1lIHRoZSBzaWRlYmFyIGNoYW5nZXMgaXRzIHNpemUuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFJlc2l6ZVNlbnNvciAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgUmVzaXplU2Vuc29yKG8uc3RpY2t5U2lkZWJhclswXSwgZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ub25TY3JvbGwobyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfShvKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHNpZGViYXIgdG8gaXRzIGRlZmF1bHQgc3RhdGVcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0U2lkZWJhcigpIHtcclxuICAgICAgICAgICAgICAgICAgICBvLmZpeGVkU2Nyb2xsVG9wID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBvLnNpZGViYXIuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiAnMXB4J1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG8uc3RpY2t5U2lkZWJhci5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAncG9zaXRpb24nOiAnc3RhdGljJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAnbm9uZSdcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGhlaWdodCBvZiBhIGRpdiBhcyBpZiBpdHMgZmxvYXRlZCBjaGlsZHJlbiB3ZXJlIGNsZWFyZWQuIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGZhaWxzIGlmIHRoZSBmbG9hdHMgYXJlIG1vcmUgdGhhbiBvbmUgbGV2ZWwgZGVlcC5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldENsZWFyZWRIZWlnaHQoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBlLmhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IE1hdGgubWF4KGhlaWdodCwgJCh0aGlzKS5oZWlnaHQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0V2lkdGhGb3JPYmplY3Qob2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciB3aWR0aDtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aCA9IG9iamVjdFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2lkdGggPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gb2JqZWN0LndpZHRoKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB3aWR0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59KShqUXVlcnkpO1xyXG5cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwcy90aGVpYS1zdGlja3ktc2lkZWJhci5qcy5tYXBcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCBcIkAvc3R5bGVzL2hvbWUuc2Nzc1wiO1xyXG5pbXBvcnQgXCJAL2pzL3RoZWlhLXN0aWNreS1zaWRlYmFyLmpzXCI7XHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuICAgICQoKCkgPT4ge1xyXG4gICAgICAgICQoXCIuY29udGVudCwgLnNpZGViYXJcIikudGhlaWFTdGlja3lTaWRlYmFyKHtcclxuICAgICAgICAgICAgLy8gU2V0dGluZ3NcclxuICAgICAgICAgICAgYWRkaXRpb25hbE1hcmdpblRvcDogMTIwLFxyXG4gICAgICAgICAgICBtaW5XaWR0aDogMTAyNCxcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KShqUXVlcnkpO1xyXG4iXSwibmFtZXMiOlsiJCIsImpRdWVyeSIsImZuIiwidGhlaWFTdGlja3lTaWRlYmFyIiwib3B0aW9ucyIsInRyeUluaXQiLCIkdGhhdCIsImluaXRpYWxpemVkIiwid2lkdGgiLCJtaW5XaWR0aCIsIm5hbWVzcGFjZSIsImxlbmd0aCIsImFwcGVuZCIsImVhY2giLCJvIiwic2lkZWJhciIsInRoaXMiLCJjb250YWluZXIiLCJjb250YWluZXJTZWxlY3RvciIsInBhcmVudCIsInBhcmVudHMiLCJjc3MiLCJkZWZhdWx0UG9zaXRpb24iLCJzdGlja3lTaWRlYmFyIiwiZmluZCIsImphdmFTY3JpcHRNSU1FVHlwZXMiLCJmaWx0ZXIiLCJpbmRleCIsInNjcmlwdCIsInR5cGUiLCJtYXRjaCIsInJlbW92ZSIsImFkZENsYXNzIiwiY2hpbGRyZW4iLCJtYXJnaW5Cb3R0b20iLCJwYXJzZUludCIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIiwiY29sbGFwc2VkVG9wSGVpZ2h0Iiwib2Zmc2V0IiwidG9wIiwiY29sbGFwc2VkQm90dG9tSGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJyZXNldFNpZGViYXIiLCJmaXhlZFNjcm9sbFRvcCIsInN0aWNreVNpZGViYXJQYWRkaW5nVG9wIiwic3RpY2t5U2lkZWJhclBhZGRpbmdCb3R0b20iLCJwcmV2aW91c1Njcm9sbFRvcCIsIm9uU2Nyb2xsIiwiaXMiLCJkaXNhYmxlT25SZXNwb25zaXZlTGF5b3V0cyIsIm91dGVyV2lkdGgiLCJzY3JvbGxUb3AiLCJkb2N1bWVudCIsInBvc2l0aW9uIiwiYWRkaXRpb25hbE1hcmdpblRvcCIsIndpbmRvd09mZnNldEJvdHRvbSIsIm9mZnNldFRvcCIsIm9mZnNldEJvdHRvbSIsImFkZGl0aW9uYWxNYXJnaW5Cb3R0b20iLCJjb250YWluZXJUb3AiLCJjb250YWluZXJCb3R0b20iLCJlIiwiaGVpZ2h0IiwiTWF0aCIsIm1heCIsIndpbmRvd09mZnNldFRvcCIsIndpbmRvdyIsInN0YXRpY0xpbWl0VG9wIiwic3RhdGljTGltaXRCb3R0b20iLCJzY3JvbGxUb3BEaWZmIiwic2lkZWJhckJlaGF2aW9yIiwibWluIiwic2lkZWJhclNhbWVIZWlnaHRBc0NvbnRhaW5lciIsInNjcm9sbExlZnQiLCJnZXRXaWR0aEZvck9iamVjdCIsImxlZnQiLCJ0cmFuc2Zvcm0iLCJ1cGRhdGVTaWRlYmFySGVpZ2h0Iiwib24iLCJSZXNpemVTZW5zb3IiLCJpbml0Iiwib2JqZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZXJyIiwiZXh0ZW5kIiwiY29uc29sZSIsImxvZyIsImV2dCIsInVuYmluZCIsInRyeUluaXRPckhvb2tJbnRvRXZlbnRzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9